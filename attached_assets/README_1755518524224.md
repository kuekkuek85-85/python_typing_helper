# README â€“ Replit ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸ (Step by Step)

> ëª©í‘œ: ë³¸ READMEëŠ” **ìˆ˜ì—… í˜„ì¥ ë°°í¬ ê°€ëŠ¥í•œ ìµœì†Œ ë‹¨ìœ„**ë¶€í„° ê¸°ëŠ¥ì„ ì ì§„ì ìœ¼ë¡œ ë¶™ì—¬ **ì•ˆì •ì ìœ¼ë¡œ 1.0 ì¶œì‹œ**í•˜ëŠ” ê²ƒì„ ë•ìŠµë‹ˆë‹¤.
> ê¸°íƒ€: ê°œë°œí•˜ëŠ” ê³¼ì •ì—ì„œì˜ AI agentëŠ” ëª¨ë“  ê³¼ì •ê³¼ ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ë‹µë³€í•˜ë„ë¡ í•©ë‹ˆë‹¤.
> ìŠ¤íƒ: Flask + HTML/CSS/JS + Supabase(PostgreSQL)

---

## 0) ì¤€ë¹„
- Replit ìƒˆ í”„ë¡œì íŠ¸(Python) ìƒì„±
- **Secrets/í™˜ê²½ë³€ìˆ˜** ì„¤ì •
  - `SUPABASE_URL` = (í”„ë¡œì íŠ¸ URL)
  - `SUPABASE_ANON_KEY` = (anon í‚¤)
  - `ADMIN_USER` = `admin`
  - `ADMIN_PASS` = `admin`
- íŒ¨í‚¤ì§€ ì„¤ì¹˜
  ```bash
  pip install flask supabase
  ```
- Supabase SQL ì½˜ì†”ì— ì•„ë˜ í…Œì´ë¸”/ì¸ë±ìŠ¤ ì‹¤í–‰ (PRD ì°¸ì¡°)
  ```sql
  CREATE TABLE IF NOT EXISTS records (
    id SERIAL PRIMARY KEY,
    student_id TEXT NOT NULL,
    mode TEXT NOT NULL,
    wpm INT NOT NULL,
    accuracy FLOAT NOT NULL,
    score INT NOT NULL,
    duration_sec INT NOT NULL,
    created_at TIMESTAMP DEFAULT now()
  );
  CREATE INDEX IF NOT EXISTS idx_records_mode ON records(mode);
  CREATE INDEX IF NOT EXISTS idx_records_sort ON records(score DESC, accuracy DESC, wpm DESC, created_at ASC);
  CREATE EXTENSION IF NOT EXISTS pg_trgm;
  CREATE INDEX IF NOT EXISTS idx_records_student_id_trgm ON records USING gin (student_id gin_trgm_ops);
  ```

---

## v0.1 í”„ë¡œì íŠ¸ ìŠ¤ìºí´ë“œ
- [ ] Flask ê¸°ë³¸ ì„œë²„ (`app.py`), ë£¨íŠ¸ ë¼ìš°íŠ¸ ë°˜í™˜(í—¬ìŠ¤ì²´í¬)
- [ ] ì •ì  í´ë” `static/`ì™€ í…œí”Œë¦¿ `templates/` êµ¬ì„±
- [ ] í™ˆ í˜ì´ì§€: 4ê°œ ëª¨ë“œ ì„ íƒ ì¹´ë“œ(ìë¦¬/ë‚±ë§/ë¬¸ì¥/ë¬¸ë‹¨)

## v0.2 ìë¦¬ ì—°ìŠµ UI + íƒ€ì´ë¨¸
- [ ] ìë¦¬ ì—°ìŠµ í™”ë©´: ë¬¸ì œ ë¬¸êµ¬, ì…ë ¥ì°½, ì˜¤íƒ€ í•˜ì´ë¼ì´íŠ¸
- [ ] 5ë¶„ ì¹´ìš´íŠ¸ë‹¤ìš´ íƒ€ì´ë¨¸(í´ë¼)
- [ ] 5ë¶„ ì´ë‚´ **ì €ì¥ ë²„íŠ¼ ë¹„í™œì„±í™”**

## v0.3 ë‚±ë§/ë¬¸ì¥/ë¬¸ë‹¨ ëª¨ë“œ ì¶”ê°€
- [ ] ê° ëª¨ë“œë³„ ì˜ˆë¬¸ ì„¸íŠ¸/ë¡œì§ ë¶„ë¦¬(ë‚œì´ë„ ê³¡ì„ )
- [ ] ë¬¸ë‹¨ ëª¨ë“œ: ë“¤ì—¬ì“°ê¸° ê°€ì´ë“œ í‘œì‹œ

## v0.4 ì„±ëŠ¥ ì§€í‘œ ê³„ì‚°
- [ ] ì‹¤ì‹œê°„ WPM(5ì/ë‹¨ì–´), ì •í™•ë„(%) ê³„ì‚°
- [ ] ì ìˆ˜ ê³„ì‚°: `score = round(max(0, WPM) * (accuracy/100)**2 * 100)`
- [ ] ê²°ê³¼ í™”ë©´: WPM/Accuracy/Score í‘œì‹œ

## v0.5 Supabase ì—°ë™(ì €ì¥)
- [ ] `POST /api/records` ë¼ìš°íŠ¸
- [ ] ë³¸ë¬¸: `student_id`, `mode`, `wpm`, `accuracy`, `score`, `duration_sec`
- [ ] **ìœ íš¨ì„± ê²€ì¦(ë°±ì—”ë“œ)**: ì •ê·œì‹ `^\d{5}\s[ê°€-í£]{2,4}$`
- [ ] **ì‹œê°„ ê²€ì¦**: `duration_sec >= 300` ì¸ ê²½ìš°ë§Œ ì €ì¥
- [ ] í”„ëŸ°íŠ¸ ì…ë ¥ì°½ placeholder: `"í•™ë²ˆ ì´ë¦„ (ì˜ˆ: 10218 í™ê¸¸ë™)"`

## v0.6 ëŒ€ì‹œë³´ë“œ Top10
- [ ] `GET /api/records/top?mode=â€¦`
- [ ] ì •ë ¬: score desc â†’ accuracy desc â†’ wpm desc â†’ created_at asc
- [ ] Top10 ë Œë”ë§, ëª¨ë“œ íƒ­ 4ê°œ

## v0.7 ë” ë³´ê¸°(í˜ì´ì§€ë„¤ì´ì…˜)
- [ ] `GET /api/records?mode=â€¦&limit=10&offset=0`
- [ ] â€œë” ë³´ê¸°â€ í´ë¦­ ì‹œ 10ê°œì”© ì¶”ê°€ ë¡œë“œ
- [ ] â€œì „ì²´ ë³´ê¸°â€ í† ê¸€ ë˜ëŠ” ë¬´í•œ ìŠ¤í¬ë¡¤ ì„ íƒ

## v0.8 ê²€ìƒ‰(ë¶€ë¶„ ì¼ì¹˜)
- [ ] ìƒë‹¨ ê²€ìƒ‰ ë°”(2ì ì´ìƒ ì…ë ¥ ì‹œ ë™ì‘, ë””ë°”ìš´ìŠ¤ 300ms)
- [ ] `search` íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ `student_id ilike '%q%'`
- [ ] ê²€ìƒ‰+í˜ì´ì§€ë„¤ì´ì…˜ ë™ì‹œ ë™ì‘

## v0.9 êµì‚¬ ê´€ë¦¬ì ëª¨ë“œ
- [ ] ìš°ì¸¡ ìƒë‹¨ â€œêµì‚¬ ë¡œê·¸ì¸â€ ë²„íŠ¼ â†’ ëª¨ë‹¬
- [ ] ì¸ì¦(`ADMIN_USER`/`ADMIN_PASS`) ì„±ê³µ ì‹œ í† í° ë°œê¸‰(ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€)
- [ ] ê´€ë¦¬ì ì „ìš© UI: í–‰ ë‹¨ìœ„ **ìˆ˜ì •/ì‚­ì œ** ë²„íŠ¼
- [ ] `PATCH /api/records/{id}`, `DELETE /api/records/{id}` êµ¬í˜„(í† í° ê²€ì‚¬)

## v1.0 í´ë¦¬ì‹± & ë°°í¬
- [ ] ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤, ë¹ˆ ìƒíƒœ ë©”ì‹œì§€
- [ ] ì—ëŸ¬ í•¸ë“¤ë§(ë„¤íŠ¸ì›Œí¬/ê²€ì¦ ì‹¤íŒ¨)
- [ ] í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì €(ìœˆë„ìš° í¬ë¡¬/ì—£ì§€), í™”ë©´ í™•ëŒ€ 125% ê²€ì¦
- [ ] ìˆ˜ë½ í…ŒìŠ¤íŠ¸ íŒ¨ìŠ¤(ì•„ë˜ ëª©ë¡)

---

## ì‹¤í–‰ ê°€ì´ë“œ(Replit)
- `app.py`ì— Flask ì„œë²„ ì‘ì„± í›„ **Run** ë²„íŠ¼
- í¬íŠ¸ëŠ” Replit ê¸°ë³¸(í†µìƒ 8000/8080) ì‚¬ìš©
- ì¥ì¹˜ ë³´ì•ˆ: ê´€ë¦¬ì ìê²©ì€ í™˜ê²½ë³€ìˆ˜ë¡œ ìœ ì§€, í•„ìš”ì‹œ ë°°í¬ ì‹œì ì— ë³€ê²½

---

## ìƒ˜í”Œ ì½”ë“œ ìŠ¤ë‹ˆí«

### Flask ì„œë²„(ìš”ì•½)
```python
from flask import Flask, request, jsonify
import os, re
from supabase import create_client, Client

app = Flask(__name__)

SUPABASE_URL = os.environ.get("SUPABASE_URL")
SUPABASE_KEY = os.environ.get("SUPABASE_ANON_KEY")
ADMIN_USER = os.environ.get("ADMIN_USER", "admin")
ADMIN_PASS = os.environ.get("ADMIN_PASS", "admin")

supabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)
ID_RE = re.compile(r"^\d{5}\s[ê°€-í£]{2,4}$")

@app.post("/api/records")
def create_record():
    body = request.json or {}
    student_id = body.get("student_id", "").strip()
    mode = body.get("mode")
    wpm = int(body.get("wpm", 0))
    accuracy = float(body.get("accuracy", 0))
    score = int(body.get("score", 0))
    duration_sec = int(body.get("duration_sec", 0))
    if not ID_RE.match(student_id):
        return jsonify({"error": "í˜•ì‹ ì˜¤ë¥˜(ì˜ˆ: 10218 í™ê¸¸ë™)"}), 400
    if duration_sec < 300:
        return jsonify({"error": "5ë¶„ ì¢…ë£Œ í›„ ì €ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤."}), 400
    res = (supabase.table("records").insert({
        "student_id": student_id,
        "mode": mode,
        "wpm": wpm,
        "accuracy": accuracy,
        "score": score,
        "duration_sec": duration_sec
    }).execute())
    return jsonify({"ok": True, "id": res.data[0]["id"]})
```

---

## ìˆ˜ë½ í…ŒìŠ¤íŠ¸(ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [ ] 5ë¶„ ì´ì „ ì €ì¥ ì‹œë„ â†’ ì„œë²„ 400 ê±°ë¶€
- [ ] `10218 í™ê¸¸ë™` ìœ íš¨ / `1021 í™ê¸¸ë™`, `10218 hong` ë¬´íš¨
- [ ] ëŒ€ì‹œë³´ë“œ Top10 ë™ì¼ ì •ë ¬ë¡œ í‘œì‹œ
- [ ] â€œë” ë³´ê¸°â€ 10ê°œì”© ì¶”ê°€, ë” ì´ìƒ ì—†ìœ¼ë©´ ë¹„í™œì„±
- [ ] ê²€ìƒ‰ì— `102`, `ê¸¸ë™` ë“± ë¶€ë¶„ ì¼ì¹˜ ì •ìƒ ë™ì‘
- [ ] êµì‚¬ ë¡œê·¸ì¸ í›„ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥, ë¹„ë¡œê·¸ì¸ ì‹œ ë²„íŠ¼ ìˆ¨ê¹€

í–‰ìš´ì„ ë¹•ë‹ˆë‹¤! ğŸ‰
